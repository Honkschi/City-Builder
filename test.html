<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
// Canvas und Kontext initialisieren
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// Klasse für die importierte Box (Container)
class ImportedBox {
  constructor(x, y, width, height, color) {
    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.color = color;
    this.grid = []; // Raster wird hier gespeichert
    this.createGrid(); // Beim Erstellen der Box wird das Raster erzeugt
  }

  // Methode, um das Raster zu erstellen
  createGrid(rows = 4, cols = 4) {
    const cellWidth = this.width / cols;
    const cellHeight = this.height / rows;

    for (let row = 0; row < rows; row++) {
      for (let col = 0; col < cols; col++) {
        this.grid.push({
          x: this.x + col * cellWidth,
          y: this.y + row * cellHeight,
          width: cellWidth,
          height: cellHeight,
          clicked: false, // Gibt an, ob das Rechteck angeklickt wurde
        });
      }
    }
  }

  // Methode, um die Box und das Raster zu zeichnen
  draw() {
    ctx.fillStyle = this.color;
    ctx.fillRect(this.x, this.y, this.width, this.height);

    // Raster zeichnen
    for (let cell of this.grid) {
      ctx.strokeStyle = "black";
      ctx.strokeRect(cell.x, cell.y, cell.width, cell.height);

      if (cell.clicked) {
        // Wenn ein Rechteck angeklickt wurde, fülle es mit einer Farbe
        ctx.fillStyle = "rgba(0, 255, 0, 0.3)";
        ctx.fillRect(cell.x, cell.y, cell.width, cell.height);
      }
    }
  }

  // Überprüfen, ob ein Klick auf ein Rechteck im Raster erfolgt ist
  handleClick(mouseX, mouseY) {
    for (let cell of this.grid) {
      if (
        mouseX >= cell.x &&
        mouseX <= cell.x + cell.width &&
        mouseY >= cell.y &&
        mouseY <= cell.y + cell.height
      ) {
        cell.clicked = !cell.clicked; // Status umschalten
      }
    }
  }
}

// Eine Instanz der importierten Box erstellen
const importedBox = new ImportedBox(100, 100, 400, 400, "lightblue");

// Event Listener für Mausklicks hinzufügen
canvas.addEventListener("click", (e) => {
  const rect = canvas.getBoundingClientRect();
  const mouseX = e.clientX - rect.left;
  const mouseY = e.clientY - rect.top;

  // Überprüfen, ob auf ein Rechteck im Raster geklickt wurde
  importedBox.handleClick(mouseX, mouseY);
});

// Hauptzeichnungsfunktion
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height); // Canvas löschen

  // Importierte Box und Raster zeichnen
  importedBox.draw();

  requestAnimationFrame(draw);
}

// Zeichnen starten
draw();
</script>
